name: copy packages.json from meetruck/mouse-web
on:
  repository_dispatch:
    types: [target-updated]
jobs:
  copy-target:
    name: IFtest
    runs-on: ubuntu-latest
    steps:
      - name: checkout
        uses: actions/checkout@v2
      - name: clone actionTest
        uses: actions/checkout@v2
        with:
          repository: km-blip/actionTest
          path: actionTest
          token: ${{ secrets.ACCESS_TOKEN }}
      - name: ifbunn2
        if : hashFiles('${GITHUB_REF#refs/heads/}/package.json') == '' && hashFiles('./actionTest/package.json') != hashFiles('${GITHUB_REF#refs/heads/}/package.json')
        run : |
            echo "make newcache"
            ls -la .
            ls -la ${GITHUB_REF#refs/heads/}
      - name: erusubunn2
        if : hashFiles('${GITHUB_REF#refs/heads/}/package.json') != '' && hashFiles('./actionTest/package.json') == hashFiles('${GITHUB_REF#refs/heads/}/package.json')
        run : |
            echo "reuse cache"
            ls -la ${GITHUB_REF#refs/heads/}/
